"use strict";

var _ = require("lodash");

module.exports = parse;

function parse(input) {
  var lines = input.split("\n");
  var header = parseLineAsObject(lines[0], ["nrows", "ncols", "minHam", "maxSize"]);
  var pizza = _(lines)
    .drop(1)
    .map(function(line) {
      return line.split("");
    })
    .map(function(chars) {
      return _.map(chars, function(char) {
        return char === "H";
      });
    })
    .value();
  return _.assign({}, header, {pizza: pizza});
}

function parseLineAsObject(line, keys) {
  return _.object(keys, _.map(line.split(" "), _.ary(parseInt, 1)));
}
